angular.module("app").controller("MainController",["$scope","github","$location",function(a,b,c){repos=[],pageNumber=1,repoLocation="https://api.github.com/orgs/WASdev/repos";var d=c.path();a.myFilter=d.slice(1),a.click=function(a){c.path(a)},a.$on("$locationChangeSuccess",function(b){var d=c.path();a.myFilter=d.slice(1),console.log(a.myFilter)}),a.sortType="-repositoryData.pushed_at",a.reverseSort=!1,a.changeSortType=function(b){a.sortType=b},a.changeOrder=function(){a.reverseSort=!a.reverseSort},a.arrayOfFilters=[],arrayOfPrefixes=[],arrayOfTags=[],a.arrayOfFiltersAndData=[],a.masterArrayOfFiltersAndData=[],generateFilters=function(){angular.forEach(repos,function(b,c){var d=b.name.indexOf("."),e=b.name.substr(0,d);switch(e){case"sample":e="samples";break;case"ci":e="continuous integration";break;case"lib":e="libraries";break;case"tool":e="tools"}b.name.indexOf("docker")>-1&&(e="docker"),arrayOfPrefixes.push(e),a.arrayOfFilters.indexOf(e)==-1&&a.arrayOfFilters.push(e)})},generateTags=function(){angular.forEach(repos,function(b,c){if(void 0==b.description&&null==b.description,null!==b.description&&void 0!==b.description)var d=b.description.split(" ");angular.forEach(d,function(b,d){b.indexOf("#")>-1&&(arrayOfTags[c]=b,a.arrayOfFilters.indexOf(b)==-1&&a.arrayOfFilters.push(b))}),d=[]})},pushToArray=function(){angular.forEach(arrayOfPrefixes,function(b,c){var d=[];d.push(b),null!=arrayOfTags[c]&&d.push(arrayOfTags[c]),arrayOfFilteresAndData={tags:d,repositoryData:repos[c]},a.masterArrayOfFiltersAndData.push(arrayOfFilteresAndData)})},getAllGitHubData=function(){url=repoLocation+"?per_page=100&page="+pageNumber,"?test"==location.search&&(url="https://raw.githubusercontent.com/BillyD73/billyd73.github.io/master/test.json"),"?official"==location.search&&(url="https://raw.githubusercontent.com/BillyD73/billyd73.github.io/master/official.json"),b.getGitHubData(url,function(a){repos=repos.concat(a.data),null==location.search&&a.headers("link").indexOf("next")>=0?(pageNumber+=1,getAllGitHubData()):(pushToArray(),generateFilters(),generateTags(),pushToArray())})},getAllGitHubData()}]);
